## Домашнее задание к занятию 1. «Типы и структура СУБД»

### Задача 1
*Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определённых данных.*

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

* электронные чеки в json-виде,
  * Документоориентированные ДБ (MongoDB). Каждый документ может иметь свою внутреннюю структуру;
* склады и автомобильные дороги для логистической компании,
  * Сетевые БД. Сетевые базы данных представляются не деревом, а общим графом
* генеалогические деревья,
  * Иерархические БД. Каждая запись может иметь не более одного родителя.
* кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
  * БД Ключ - Значение (Memcached). Нет жёсткой схемы отношения между данными, поэтому в таких БД часто хранят одновременно различные типы данных
* отношения клиент-покупка для интернет-магазина.
  * Реляционные БД (MSSQL,MySQL). Данные и связи между данными организованы с помощью таблиц.        


Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Задача 2
*Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):*

* данные записываются на все узлы с задержкой до часа (асинхронная запись);
  * CA PC/EL
* при сетевых сбоях система может разделиться на 2 раздельных кластера;
  * PA PA/EC
* система может не прислать корректный ответ или сбросить соединение.
  * PC PA/EC


Согласно PACELC-теореме как бы вы классифицировали эти реализации?

### Задача 3
*Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?*
  * Не могут из-за использования разного подхода. ACID делает упор на надёжность и предсказуемость, BASE на производительность в ущерб надёжности.

### Задача 4
*Вам дали задачу написать системное решение, основой которого бы послужили:*

* фиксация некоторых значений с временем жизни,
* реакция на истечение таймаута.   
Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора этой системы?

**Ответ:** Redis — это база данных, размещаемая в памяти, которая используется, в основном, в роли кеша, находящегося перед другой, «настоящей» базой данных, вроде MySQL или PostgreSQL. Кеш, основанный на Redis, помогает улучшить производительность приложений. Он эффективно использует скорость работы с данными, характерную для памяти, и смягчает нагрузку центральной базы данных приложения. Redis работает в оперативной памяти и в однопоточном режиме.

**Недостатки:**
   * Для повышения отказоустойчивости системы используется кластер миинимум из 3 -х серверов с кворумом из 2.
   * Операции по сохранению данных на диск выполняются асинхронно, что на практике может привести к потере данных, которые были подтверждены системой клиенту.
   * При не правильной настройке кластера может возникнуть ситуация, когда кластер окажется разделённым на части в том случае, если он не сможет разрешить неоднозначную ситуацию, когда «за» и «против» голосует одинаковое количество систем. Этот феномен называют «split brain»(разделение вычислительных мощностей). Поэтому, в качестве общего правила, важно, чтобы в кластере было бы нечётное количество ведущих узлов, у каждого из которых имеется два подчинённых узла.
   * Главный минус механизма RDB - файлов заключается в том, что данные, поступившие в хранилище между моментами создания снепшотов, будут, при сбое Redis, утеряны.
   * Главный минус механизма AOF - в том, что такой формат хранения данных требует бОльшего дискового просттанства, чем RDB, но при этом является более надёжным и позволяет восстановить больше данных при сбое системы. 


