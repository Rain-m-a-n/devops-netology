## Домашнее задание к занятию 3. «Введение. Экосистема. Архитектура. Жизненный цикл Docker-контейнера»

### **Задача 1**

*Сценарий выполнения задачи:*

создайте свой репозиторий на https://hub.docker.com;
выберите любой образ, который содержит веб-сервер Nginx;
создайте свой fork образа;
реализуйте функциональность: запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
Опубликуйте созданный fork в своём репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.  

#### **Решение**
* *Cкачиваем образ с nginx:*
    * docker pull ngnix
* *Создаём и запускаем контейнер:*
    * docker run -d ngnix
* *Узнаем имя контейнера*
    * docker ps
* *Подключаемся к контейнеру*
    * docker exec -it friendly_hugle bash 
* *Устанавливаем редактор для изменения index.html:*
    * apt update && apt install nano
* *Редактируем index.html:*
    * echo "" > /usr/share/nginx/html/index.html && nano /usr/share/nginx/html/index.html
    * вставляем код из задачи, сохраняем. 
* *Узнаем адрес контейнера и перезапускаем nginx:*
    * service nginx restart && hostname -I 
* *Открывает браузер и вводим адрес контейнера (вывод должен быть таким):*   
    ![Результат](https://github.com/Rain-m-a-n/devops-netology/raw/master/Виртуализация/Home_Work_(5.3)/pic/nginx.png)
* *Создаём образ текущего контейнера:*
    * docker commit -m "nginx_test" -a "BortnikovSV" fb79bcb4ac51 **xxxxx**/nginx_v2  
    (где **ххххх** - имя пользователя при регистрации на ресурсе)
* *Логинимся на Docker Hub:*
    * docker login -u **xxxxx**   (- где **ххххх** - имя пользователя при регистрации на ресурсе)  
    * вводим пароль от ресурса
* *Отправляем созданный образ на ресурс:*
    * docker push **ххххх**/nginx_v2  
---
[Ссылка образ](https://hub.docker.com/repository/docker/bsv27/nginx_v2/general)

---

### **Задача 2**
*Посмотрите на сценарий ниже и ответьте на вопрос: «Подходит ли в этом сценарии использование Docker-контейнеров или лучше подойдёт виртуальная машина, физическая машина? Может быть, возможны разные варианты?»*

Детально опишите и обоснуйте свой выбор.

--

*Сценарий:*

* **высоконагруженное монолитное Java веб-приложение;**
    * Физический сервер или VM предпочтительнее, т.к. необходим прямой доступ к ресурсам.
* **Nodejs веб-приложение;**
    * под обычное вэб приложение подойдёт Docker, т.к. снижает время на развёртывание системы и организацию инфраструктуры
* **мобильное приложение c версиями для Android и iOS;**
    * виртуальная машина, Docker не создан для запуска GUI
* **шина данных на базе Apache Kafka;**
    * Это сервис по трансляции данных. Подойдёт контейнеризация, нет расходов на виртуализацию, а так же простота масштабирования и управления.
* **Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana;**
    * лучше использовать виртуализацию, отказоустойчивость решается на уровне кластера
* **мониторинг-стек на базе Prometheus и Grafana;**
    * Можно развернуть с помощью Docker, легче маштабировать. Но можно и на виртуальной машине. 
* **MongoDB как основное хранилище данных для Java-приложения;**
    * в зависимости от нагрузки, если нагрузка большая, то физический сервер. В противном случае подойдёт любой вариант. 
* **Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry.**
    * Виртуализация + Docker. 

### **Задача 3**
* Запустите первый контейнер из образа **centos** c любым тегом в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера.  
* Запустите второй контейнер из образа **debian** в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера.  
Подключитесь к первому контейнеру с помощью docker exec и создайте текстовый файл любого содержания в /data.
* Добавьте ещё один файл в папку /data на хостовой машине.  
* Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /data контейнера.  

  #### **Ответ**
  ![Результат](https://github.com/Rain-m-a-n/devops-netology/raw/master/Виртуализация/Home_Work_(5.3)/pic/answer.png)
### **Задача 4 (*)**
*Воспроизведите практическую часть лекции самостоятельно.*

Соберите Docker-образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.

